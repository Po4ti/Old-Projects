<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprDeliriumIdle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>50</depth>
  <persistent>-1</persistent>
  <parentName>objDeliriumRoomStartParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.noPause = true;
scrPlayMusic(musRationalityBoss,1);

image_speed=1/2;
maxHP = 13337;
curHP = maxHP;

inst = noone;
portal = noone;
/*
hpBar = instance_create(0,0,objDeliriumHPBar);
hpBar.image_xscale = 800;
instance_create(0,0,objDeliriumHPBarEmpty);
*/
hpStr="";


count = 0;
nextattack=0;
prevattack=-1;
eyeLeftX = x;
eyeRightX = x;
eyeY = y;

portalEntered = false;

alarm[0] = 50;
scrDeliriumWarningMessage("Next portal is in 15 seconds!");
audio_play_sound(sndDeliriumWarning,0,0);
alarm[6] = 750;

prevRoom = -1;

portalCoords[0,0] = 368;
portalCoords[0,1] = 400;
portalCoords[1,0] = 90;
portalCoords[1,1] = 352;
portalCoords[2,0] = 400;
portalCoords[2,1] = 564;
portalCoords[3,0] = 400;
portalCoords[3,1] = 192;

if(!global.visitedAlmurat) {
    global.visitedAlmurat = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///berserk
if(!portalEntered) {
    with(portal) {
        instance_destroy();
    }
    portal = noone;
}
if(room != rPronin) {
    portalEntered = false;
    visible = true;
    room_goto(rPronin);
    if(instance_exists(objPlayer)) {
        objPlayer.x = 400;
        objPlayer.y = 304;
    }
    instance_create(0,0,objWhiteFlash);
    audio_play_sound(sndGlass,0,0);
}

objBerserkTimer.alarm[1] = 25;
if(instance_exists(objShake)) {
    with(objShake) {
        instance_destroy();
    }
}
objConcentrationMeter.alarm[1] = 1;
objMadnessMeter.alarm[1] = 1;
objSanityMeter.alarm[3] = 1;

with(objDeliriumSlowSpawner) {
    instance_destroy();
}
with(objPortalTimer) {
    instance_destroy();
}

sprite_index=sprDelirium;
image_blend = c_red;
image_speed = 1/2;
for(i=0;i&lt;10;i++) {
    alarm[i] = -1;
}
alarm[10] = 7;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///berserk attack
var spawnAngle;

event_user(0);

spawnAngle = irandom(72);

for(i=0;i&lt;8;i++) {
    for(j=11;j&gt;2;j--) {
        inst = instance_create(x,y-32,objDeliriumSuperCurveBullet);
        inst.speed = j;
        inst.direction = spawnAngle + i * 72;
    }
}
audio_play_sound(sndTan00,0,0);
alarm[10] = 25;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///returned
poratl = noone;
event_user(0);
sprite_index = sprDeliriumIdle;
alarm[0] = 100;
scrDeliriumWarningMessage("Next portal is in 30 seconds!");
alarm[6] = 1500;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///portal entered
instance_create(0,0,objWhiteFlash);
x = -400;
y = -400;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Portal missed
if(!portalEntered) {
    with(portal) {
        instance_destroy();
    }
    portal = noone;
}

with(objDeliriumSlowSpawner) {
    instance_destroy();
}

//immune = false;
sprite_index = sprDeliriumIdle;
objPortalTimer.alarm[1]=1;
alarm[0] = 1;
scrDeliriumWarningMessage("Next portal is in 25 seconds!");
alarm[6] = 1250;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Portal Spawn
var roomChoser,rr;

rr = irandom(3);
if(rr == prevRoom) {
    rr = ((rr + 2) mod 4);
}
prevRoom = rr;
rr++; // to match 1-4 


roomChoser = asset_get_index("rPronin" + string(rr));

rr--; // to get array coords
portal = instance_create(144,choose(16,544),objDeliriumPortal);
portal.roomTo = roomChoser;
portal.warpX = portalCoords[rr,0];
portal.warpY = portalCoords[rr,1];

audio_play_sound(sndDeliriumPortalSpawned,0,0);
//teleport
event_user(0);
//waiting 
inst = instance_create(0,0,objDeliriumSlowSpawner);
if(portal.y == 544) {
    inst.patt = 1;
}
sprite_index=sprDelirium;


for(i=0;i&lt;7;i++) {
    alarm[i] = -1;
}

scrDeliriumWarningMessage("Portal Spawned!");
scrScreenShake(550,4,4);

objPortalTimer.alarm[0]=1;
alarm[7] = 600;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///big circles
event_user(0);


inst = instance_create(x,y-75,objDeliriumCircler);
inst.direction = point_direction(x,y-75,400,304);
if(x == 400) {
    inst.direction = irandom(360);
}
inst.speed = 3;
audio_play_sound(sndKira01,0,0);

count++;

if(count &gt;= 3) {
    alarm[0] = 150;
} else {
    alarm[5] = 60;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///press x
instance_create(0,0,objDeliriumNegative);
alarm[0] = 65;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///curving

if((count mod 3) == 0) {
    event_user(0);
}

scrMakeCircle(x,y-32,irandom(45),8,12,objDeliriumCurvingBullet);
audio_play_sound(sndTan02,0,0);
count++;

if(count &gt;= 16) {
    alarm[0] = 1;
}
else if((count mod 3) == 0) {
    alarm[3] = 1;
}
else {
    alarm[3] = 20;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///super curving
var spawnAngle;

event_user(0); // teleport

spawnAngle = irandom(72);

for(i=0;i&lt;5;i++) {
    for(j=8;j&gt;2;j--) {
        inst = instance_create(x,y-32,objDeliriumSuperCurveBullet);
        inst.speed = j;
        inst.direction = spawnAngle + i * 72;
    }
}
audio_play_sound(sndTan00,0,0);
count++;

if(count &gt;= 4) {
    alarm[0] = 25;
} 
else {
    alarm[2] = 100;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///eyeshooting
var angle,angle2;
event_user(0); // teleport
angle = 0;
angle2 = angle;
if(instance_exists(objPlayer)) {
angle = point_direction(eyeLeftX,eyeY,objPlayer.x,objPlayer.y);
angle2 = point_direction(eyeRightX,eyeY,objPlayer.x,objPlayer.y);
}

scrMakeCircle(eyeLeftX,eyeY,angle,5,6,objDeliriumBullet);
scrMakeCircle(eyeLeftX,eyeY,angle,5,5.5,objDeliriumBullet);
scrMakeCircle(eyeLeftX,eyeY,angle,5,5,objDeliriumBullet);
scrMakeCircle(eyeRightX,eyeY,angle,5,6,objDeliriumBullet);
scrMakeCircle(eyeRightX,eyeY,angle,5,5.5,objDeliriumBullet);
scrMakeCircle(eyeRightX,eyeY,angle,5,5,objDeliriumBullet);
audio_play_sound(sndTan01,0,0);

count++;

if(count &gt;= 3) {
    alarm[0] = 1;
} else {
    alarm[1] = 60;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///choosing the attack

count = 0;
nextattack=irandom(4);
if(nextattack == prevattack) {
    nextattack = (((nextattack + 2) mod 5));
}

prevattack=nextattack;

alarm[nextattack+1] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check player
if(!instance_exists(objPlayer)) {
    for(i=0;i&lt;11;i++) {
        alarm[i] = -1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///debug
if(global.debugMode) {
    if(keyboard_check_pressed(ord("1"))) {
        curHP = 1;
    }
    if(keyboard_check_pressed(ord("2"))) {
        alarm[6] = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(other) { 
    instance_destroy();
}

if(instance_exists(objConcentrationMeter)) {
    curHP -= objConcentrationMeter.concentration;
}

if(curHP &lt;= 0) {
    scrStopMusic();
    instance_create(0,0,objWhiteFlash);
    if(inst != noone) {
        with(inst) {
            instance_destroy()
        }
        inst = noone;
    }
    /*with(hpBar) {
        instance_destroy();
    }*/
    if(portal != noone) {
        with(portal) {
            instance_destroy()
        }
        portal = noone;
    }
    with(objSanityMeter) {
        instance_destroy();
    }
    with(objMadnessMeter) {
        instance_destroy();
    }
    with(objBerserkTimer) {
        instance_destroy();
    }
    with(objConcentrationMeter) {
        instance_destroy();
    }
    with(objDeliriumBossBulParent) {
        instance_destroy();
    }
    with(objPortalTimer) {
        instance_destroy();
    }
    with(objDeliriumWarning) {
        instance_destroy();
    }
    image_blend = c_white; // bers case
    instance_replace(objDeliriumDeath);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Teleportation
var nextX, nextY,snd;

nextX = choose(64,720);
nextY = choose(240,352,480);

if(collision_rectangle(nextX-120,nextY-180,nextX+120,nextY,objPlayer,0,1)) {
    nextX = 400;
}

snd = choose(sndDeliriumTeleport1,sndDeliriumTeleport2);
audio_play_sound(snd,0,0);
instance_create(0,0,objWhiteFlashFast);
inst = instance_create(x,y,objDeliriumTeleportShadow);
inst.image_blend = image_blend;
x = nextX;
y = nextY;

eyeY = y-86;
eyeLeftX = x-40
eyeRightX = x+30;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///HPBAR
if(curHP &gt; 0) {
    draw_sprite(sprDeliriumHPBarEmpty,-1,0,0);
    draw_sprite_ext(sprDeliriumHPBar,-1,0,0,(800 * (curHP/maxHP)),1,0,c_white,1);
    draw_set_font(fDefault12);
    draw_set_halign(fa_center);
    hpStr = string(curHP);
    hpStr += "/";
    hpStr += string(maxHP);
    scrDrawTextOutline(400,0,hpStr,c_white,c_black);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
