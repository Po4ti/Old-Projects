<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprKovshikAvoid</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>100</depth>
  <persistent>0</persistent>
  <parentName>objSTGPlayerKiller</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>d1 = 6;
plus = 180/d1;

angle[0] = 270;
angle[1] = 270;
bulAngle = 4;

n1 = 4*d1+6;
n2 = 3*d1 + 6;
n3 = 2*d1+12;
rnd = 4 //by throwing a dice

count1 = 0;
count2 = 0;
count3 = 0;
total = 0;
i=0;
j=0;
xx = x;
yy = y;
inst = noone;


timeLeft = 60;
alarm[0] = 60;
alarm[1] = 60;
alarm[4] = 50;
deg = 0;

magicCircle = instance_create(x,y,objKovshikBorderCircle);
playerDead = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///sound
audio_play_sound(sndBoom,0,0);

alarm[5] = 4;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///timer ticking
timeLeft--;

if(timeLeft mod 20 == 0) {
    if(timeLeft == 20) {
        total+=2;
    } else {
        total++;
    }
    d1 += 2;
}

if(timeLeft &lt;= 10) {
audio_play_sound(sndTimeout,0,0);
}

if(timeLeft &lt;= 1) {
    scrScreenShake(50,5,0);
    alarm[5] = 1;
    room_speed = 15;
}

if(timeLeft &lt;= 0) {
    with(objKovshikSpellBullet) {
        instance_destroy();
    }
    instance_create(0,0,objWhiteFlash);
    with(magicCircle) {
        instance_destroy();
    }
    magicCircle = noone;
    instance_create(objPlayerSTG.x,objPlayerSTG.y,objPlayer);
    with(objPlayerSTG) {
        instance_destroy();
    }
    with(objBlackBox) {
        instance_destroy();
    }
    with(objTate) {
        alarm[2] = 1;
    }
    with(objSTGBG) {
        instance_destroy();
    }
    inst = instance_create(704,544,objBossItem);
    inst.itemNum = 2;
    inst.image_index = 2;
    inst = instance_create(160,448,objSpiralWarp);
    inst.roomTo = rStage01;
    with(objDexterController) {
        instance_destroy();
    }
    audio_play_sound(sndFinalBoom,0,0);
    room_speed = 50;
    background_visible[6] = false
    instance_destroy();
}
else {
    alarm[4] = 50;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///red bullets
bulAngle = irandom(360);
n3 = 2*d1+12;
audio_play_sound(sndTan02,0,0);
for(i=0;i&lt;n3;i+=1){
    inst = instance_create(x,y,objKovshikAvoidBullet);
    inst.image_index = 1;
    inst.speed = 3 + total*0.25;
    inst.alarm[0] = 75 - total*20;
    inst.image_angle = bulAngle + 360/n3*i + 180/n3*(count3 mod 2);
    inst.direction = inst.image_angle;
}

alarm[0] = 97;
alarm[1] = alarm[0];
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///red butterflies
n2 = 3*d1 + 6;
rnd = irandom(360);
audio_play_sound(sndTan01,0,0);
for(i=0;i&lt;n2;i+=1){
    for(j=0;j&lt;2;j+=1){
        inst = instance_create(x,y,objKovshikAvoidButterfly);
        inst.image_index = 1;
        inst.speed = 2.5+j/3;
        inst.rotate = true;
        inst.alarm[0] = 70 + 10*total;
        inst.dirspd = (0.6 - 0.3*total)*sign((count2 mod 2) - 0.5);
        inst.image_angle = rnd + 360/n2*i;
        inst.direction = inst.image_angle
    }
}
count2 += 1;
if count2&lt;4{
    alarm[2] = 20;
}
else{
    alarm[3] = 100;
    count2 = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///blue butterflies
n1 = 4*d1+6;
audio_play_sound(sndTan00,0,0);
for(i=0;i&lt;n1;i+=1){
    inst = instance_create(x,y,objKovshikAvoidButterfly);
    inst.image_index = 3;
    inst.speed = 4;
    inst.alarm[0] = 50;
    inst.image_angle = angle[1] + 360/n1*i + 180/n1*(count1 mod 2);
    inst.direction = inst.image_angle;
}
count1 += 1;
if (count1&lt;6){
    alarm[1] = 5;
}
else{
    alarm[2] = 40;
    count1 = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///create lasers
plus = 180/d1;
angle[0] = 270 + plus/2;
audio_play_sound(sndLazer00,0,0);
repeat(d1){
    xx = x + lengthdir_x(80,angle[0]-60);
    yy = y + lengthdir_y(80,angle[0]-60);
    inst = instance_create(xx,yy,objKovshikAvoidLaser);
    inst.dir = angle[0] - 60;
    inst.dirspd = 1.75;
    inst.image_index = 4;
    angle[0] += plus;
    xx = x + lengthdir_x(80,angle[0]+60);
    yy = y + lengthdir_y(80,angle[0]+60);
    inst = instance_create(xx,yy,objKovshikAvoidLaser);
    inst.dir = angle[0] + 60;
    inst.dirspd = -1.75;
    inst.image_index = 2;
    angle[0] += plus;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scrCreateShadow(0.1,0);

y = 160 + 4*dsin(deg);
deg+=8;
if(deg &gt;= 360) { 
    deg = 0; 
}

if(!instance_exists(objPlayerSTG) &amp;&amp; !playerDead) {
    playerDead = true;
    for(i=0;i&lt;6;i++) {
        alarm[i] = -1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var color;
color = c_white;
if(timeLeft &lt;= 10) {
    color = c_red;
}
draw_set_font(fDefault24);
draw_set_halign(fa_center);
scrDrawTextOutline(224,540,string(timeLeft),color,c_black);
/*scrDrawTextOutline(252,540,string(total),c_yellow,c_black);
scrDrawTextOutline(276,540,string(d1),c_green,c_black);*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
scrAddColorfulLayer(c_aqua,0.7);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
