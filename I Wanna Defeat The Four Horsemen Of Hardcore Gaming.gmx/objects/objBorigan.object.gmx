<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBigGuy</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.Xmas {
    instance_create(384,40,objBorisXmasHat);
    sprite_index = sprBigGuyXmas;
}

maxHP = 13; //Здоровье
curHP = maxHP;

active = false;
hitTime = 0;
invulTime = 50;

alarm[1] = 20; //Выбор атаки

//Переменные атак
curattack = -1;
prevattack = -1;

red = 0;
blue = 1;
yellow = 2;
purple = 3;

attackTime = 1;

hpBar = instance_create(0,584,objHPBar); //Свой хпбар для финалки
hpBar.image_xscale = 800 * (curHP/maxHP);
hpBar.image_index = 4;
hpBar.visible = false;

//Переменные для финалки
xx = x;
eyes[2] = noone;
//eyeLeftX = 368;
eyeLeftX = x-31;
eyeRightX = x+25;
//eyeRightX = 424;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///player dead
for(i = 1; i &lt; 7; i++) {
    alarm[i] = -1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///FINAL
for(i = 0; i &lt; 6; i++) { //Остановка прочих алармов 
    alarm[i] = -1;
}
instance_create(0,0,objBoriganBulletKiller); //Уничтожение пуль с прошлой атаки

if(global.shaderEnable) { //Фон
    obj_BG.alarm[4] = 1;
}
active = true; //Начать финалку
hpBar.visible = true; //Включить хпбар
objSpike.alarm[0] = 1; //Ускорить шип
objSpike.patt = 1; //Сменить режим чтобы мог лечить
objSpike.target = objBorigan; //Сменить цель
objSpike.image_blend = c_white; //Смена цвета на дефолтный
objBorisPlatfrom.image_index = 0; //Смена цвета на дефолтный
eyes[0] = instance_create(eyeLeftX,96,objFinalDispenser); //Левый глаз
eyes[1] = instance_create(eyeRightX,96,objFinalDispenser); //Правый глаз
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///purple
if(!instance_exists(objPurple)) { //Проверка на наличие бутылки
    alarm[1] = 1;
}
else{
    objPurple.alarm[0] = 1; //Активация
    if(objPurple.curHP &gt; floor(objPurple.maxHP/3)+1) { //1 и 2 фазы
        objPurple.alarm[1] = attackTime; //Деакцивация в конце атаки
        alarm[0] = attackTime; //Длительность атаки
    } else if objPurple.phase = 2{ //3 фаза, она длиннее
        objPurple.step = 195; //Шаг для третьей фазы
        objPurple.alarm[1] = attackTime+250; //Деакцивация в конце атаки
        alarm[0] = attackTime+250; //Длительность атаки
    }
    
    
    if(global.shaderEnable) { //Фон
        obj_BG.alarm[3] = 1;
    }
    else {
        background_visible[5] = true;
    }
    objBorisPlatfrom.image_index = 4; //Смена цветов и цели у шипа
    objSpike.image_blend = c_purple;
    objSpike.target = objPurple;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///yellow
if(!instance_exists(objYellow)) { //Проверка на наличие бутылки
    alarm[1] = 1;
}
else {
    alarm[0] = attackTime; //Длительность атаки
    
    objYellow.alarm[0] = 1; //Активация
    objYellow.alarm[1] = attackTime; //Деакцивация в конце атаки
    
    if(global.shaderEnable) { //Фон
        obj_BG.alarm[2] = 1;
    }
    else {
        background_visible[4] = true;
    }
    objBorisPlatfrom.image_index = 2; //Смена цветов и цели у шипа
    objSpike.image_blend = c_yellow;
    objSpike.target = objYellow;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///blue
if(!instance_exists(objBlue)) { //Проверка на наличие бутылки
    alarm[1] = 1;
}
else {
    alarm[0] = attackTime;  //Длительность атаки
    
    objBlue.alarm[0] = 1; //Активация
    objBlue.alarm[1] = attackTime; //Деакцивация в конце атаки
    objBlue.alarm[2] = 1; //Установка угла
    
    if(global.shaderEnable) {
        obj_BG.alarm[1] = 1; //Фон
    }
    else {
        background_visible[3] = true;
    }
    objBorisPlatfrom.image_index = 3; //Смена цветов и цели у шипа
    objSpike.image_blend = c_blue;
    objSpike.target = objBlue;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///red
if(!instance_exists(objRed)) { //Проверка на наличие бутылки
    alarm[1] = 1;
}
else {
    alarm[0] = attackTime; //Длительность атаки
    
    objRed.alarm[0] = 1; //Активация
    objRed.alarm[1] = attackTime; //Деакцивация в конце атаки
    
    if(global.shaderEnable) { //Фон
        obj_BG.alarm[0] = 1;
    }
    else {
        background_visible[2] = true;
    }

    objBorisPlatfrom.image_index = 1; //Смена цветов и цели у шипа
    objSpike.image_blend = c_red;
    objSpike.target = objRed;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Выбор атаки
var setAlarm;
if(!global.shaderEnable) { //Фон
    for(i=2;i&lt;6;i++) {
        background_visible[i]=false;
    }
}


if(!instance_exists(objRed)
    &amp;&amp; !instance_exists(objBlue)
    &amp;&amp; !instance_exists(objYellow)
    &amp;&amp; !instance_exists(objPurple)) { //Начать финалку если надо
    alarm[6] = 1;
    
}
else { //Выбор атаки
    curattack = irandom(3); //Перемешивание атаки
    
    if(curattack == prevattack) { //Защита от повтора атаки
        curattack = (abs(curattack + choose(-1,2)) mod 4);
    }
    
    prevattack = curattack; //Переменная для защиты от повтора
    setAlarm = curattack + 2; //Аларм атаки
    attackTime = irandom_range(500,750); //Длительность атаки
    
    alarm[setAlarm] = 1; //Начало аларма нужной атаки
    
    //Волна (выключена)
    //objShockwave.alarm[1] = 1;
    
    audio_play_sound(sndBlockChange,0,0); //Звук смены атаки
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Уничтожение пуль с прошлой атаки, начало новой
if(instance_exists(objUFOCircler)) {
    with(objUFOCircler) {
        instance_destroy();
    }
}

if(instance_exists(objGensokyoSpawner)) {
    with(objGensokyoSpawner) {
        instance_destroy();
    }
}

if(instance_exists(objGensokyoBullet)) {
    with(objGensokyoBullet) {
        instance_destroy();
    }
}

if(instance_exists(objDispenser)) {
    with(objDispenser) {
        destroy = true;
    }
}

if(instance_exists(objBossBulParent)) {
    with(objBossBulParent) {
        destroyMe = true;
    }
}

instance_create(0,0,objBoriganBulletKiller);

alarm[1] = 4;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Финалка
if(active) {
    scrCreateShadow(0.5,0); //Тень
    randX = irandom_range(-8,8);
    with(objBorisXmasHat) {
        x = xstart + objBorigan.randX;
    }
    x = xx + randX; //Эффект дергания 
    eyeLeftX = x-31; //Переменная левого глаза
    eyeRightX = x+25; //Переменная правого глаза
    eyes[0].x = eyeLeftX; //X левого объекта глаза
    eyes[1].x = eyeRightX; //X правого объекта глаза
    if(hitTime &gt; 0) { //Кулдаун
        hitTime--;
    } else {
        hitTime = 0;
    }
}

if(instance_exists(hpBar)) { //Хпбар
    hpBar.image_xscale = 800 * (curHP/maxHP);
}

if(curHP &lt;= 0) { //Смерть
    with(objSpike) {
        instance_destroy();
    }
    for(var i = 0;i &lt; 2;i++) {
        with(eyes[i]) {
            instance_destroy();
        }
    }
    instance_create(0,0,objWhiteFlash);
    instance_create(x,y,objBoriganDeath);
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBlackBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(active)
    with(other) {
        instance_destroy();
    }

if(active &amp;&amp; hitTime == 0) { //Возобновление кулдауна, лечение
    audio_play_sound(sndGlass,0,0);
    curHP++;
    curHP = clamp(curHP,0,maxHP);
    hitTime = (invulTime/2);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(active)
    with(other) {
        instance_destroy();
    }
if(active &amp;&amp; hitTime == 0) { //Возобновление кулдауна, получение урона
    audio_play_sound(sndBossHit,0,0);
    curHP--;
    hitTime = invulTime;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
