<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprPurpleBottle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>objBottleParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

hpFrame = instance_create(x-16,y+32,objHPBarFrame); //Свой хпбар
hpBar = instance_create(x-16,y+32,objHPBar);
hpBar.image_xscale = 64 * (curHP/maxHP);
hpBar.image_index = 3;

inst = noone;
dir = 0;
patt = 0;

delta = 100;

//////////////////////////////
////Переменные для 3 фазы ////
//////////////////////////////
i=0;
j=0;
num=16;
xx=x;
yy=y;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(active) {    
    event_inherited(); //Шаг, смена атаки при выношении фазы
    
    if(curHP &gt; (maxHP*(3/4))) {
        event_user(0); //1 Фаза
    }
    
    if((curHP &gt; (maxHP*(2/4))) &amp;&amp; (curHP &lt;= (maxHP*(3/4)))) {
        event_user(1); //2 Фаза
    }
    
    if((curHP &gt; (maxHP*(1/4))) &amp;&amp; (curHP &lt;= (maxHP*(2/4)))) {
        event_user(2); //3 Фаза
    }
    if(curHP &lt;= (maxHP*(1/4))) {
        event_user(3); //4 Фаза
    }
}
else {
    patt = 0;
}

if(curHP &lt;= 0) { //Выношение бутылки
    active = false;
    step = 0;
    audio_play_sound(sndDeath,0,0);
    with(hpBar) {
        instance_destroy();
    }
    objBorigan.alarm[0] = 1;
    with(objGensokyoSpawner) {
        instance_destroy();
    }
    with(objDispenser) {
        instance_destroy();
    }
    with(objGensokyoBig) {
        instance_destroy();
    }
    with(objGensokyoSmall) {
        instance_destroy();
    }
    with(objGensokyoBullet) {
        instance_destroy();
    }
    with(hpFrame) {
        instance_destroy();
    }
    instance_destroy();
}

if(instance_exists(hpBar)) {
hpBar.image_xscale = 64 * (curHP/maxHP);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(active)
    with(other) {
        instance_destroy();
    }

if(active &amp;&amp; hitTime == 0) {
    audio_play_sound(sndBossHit,0,0);
    curHP--;
    hitTime = invulTime;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///4 Фаза


if instance_exists(objBorisWarning)
    exit;

rage = curHP*8 + 80;


if(step % delta == 0) {
    delta = step + rage;
    for( i = 64; i &lt;= 800-64; i += 336) {
        var c = instance_create(objBorigan.x,objBorigan.y,objPurpleSpawner);
        c.speed = -irandom_range(1,5);
        c.direction = -random(180);
        c.xx = i;
        c.yy = 608-16;
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///3 Фаза

if(step mod 200 == 0) { //Не курвинг
    inst = instance_create(objBorigan.x,objBorigan.y,objRainbowBulletSpawnEff);
    inst.image_xscale = 3;
    inst.image_yscale = 3;
    xx = objBorigan.x;
    yy = objBorigan.y;
    if(patt == 0) {
        for(i=0;i&lt;4;i+=1){
            for(j=0;j&lt;num;j+=1){
                xx = objBorigan.x + lengthdir_x(dir,(360/num*j)+dir);
                yy = objBorigan.y + lengthdir_y(dir,(360/num*j)+dir);
                inst[j] = instance_create(xx,yy,objGensokyoBig);
                inst[j].direction = (360/num*j)+dir;
                inst[j].speed = 4;
            }
            dir+=16;
        }
        dir = 0;
    }
    if(patt == 1) { //Курвинг влево
        instance_create(objBorigan.x,objBorigan.y,objGensokyoSpawnerSmallClockwise);
    }
    if(patt == 2) { //Курвинг вправо
        instance_create(objBorigan.x,objBorigan.y,objGensokyoSpawnerSmallCounterClockwise);
    }
    patt++; //Смена подфазы
    patt = (patt mod 3);
    audio_play_sound(sndKira00,0,0); //Звук
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///2 Фаза
if(step mod 8 == 0) { //Спираль из 3 волн
    instance_create(objBorigan.x,objBorigan.y,objRainbowBulletSpawnEff); //Анимация
    for(i = 0; i &lt; 3; i++) { //Мелочь
        inst = instance_create(objBorigan.x,objBorigan.y,objPurpleBullet);
        inst.direction = dir+(120*i);
        inst.speed = 8;
        inst.image_index = patt;
    }
    patt++;
    patt = (patt mod 16);
    dir += 8;
    dir = (dir mod 360);
    audio_play_sound(sndTan00,0,0);
}

if(step mod 150 == 0) { //Спавнеры
    for(i = 0; i &lt; 2; i++) {
        inst = instance_create(objBorigan.x,objBorigan.y,objDispenser);
        inst.direction = 180*i
        inst.speed = 4;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///1 Фаза

if(step mod 10 == 0) { //Спираль из 4 волн
    instance_create(objBorigan.x,objBorigan.y,objRainbowBulletSpawnEff); //Анимация
    for(i = 0; i &lt; 4; i++) {
        inst = instance_create(objBorigan.x,objBorigan.y,objPurpleBullet);
        inst.direction = dir+(90*i);
        inst.speed = 8;
        inst.image_index = patt;
    }
    patt++;
    patt = (patt mod 16);
    dir += 10;
    audio_play_sound(sndTan00,0,0); //Звук
}
if(step mod 100 == 0) { //Наводящийся спавнер
    inst = instance_create(objBorigan.x,objBorigan.y,objDispenser);
    inst.direction = irandom_range(150,330);
    inst.speed = 4;
    inst.patt = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
